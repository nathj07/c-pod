# Apache configuration fragment for the Repo server
# <%= comment or "After processing by ERB this should be linked or copied into the Apache config directory"  %>
# (Done by the install script bin/setuprepo)
#
<Directory "<%= base %>/">
    AllowOverride None
    Order deny,allow
    Deny from all
</Directory>

<Directory "<%= base %>/repo/www">
    Options Includes Indexes FollowSymLinks
    IndexIgnore .htaccess *.bak *~ RCS
    IndexOptions FancyIndexing FoldersFirst
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>

<Directory "<%= base %>/repo/gemrepo">
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>

<Directory "<%= base %>/repo/bin/">
    Options +ExecCGI
    SetHandler cgi-script
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>
#
<VirtualHost *:80>

#   Add this directive if multiple vhosts
#   ServerName repo.myco.com:80

    Alias /gem_repo "<%= base %>/repo/gemrepo"
    ScriptAlias /bin "<%= base %>/repo/bin"

    ServerAdmin nick.townsend@mac.com
    IndexIgnore .htaccess *.bak *~ RCS
    DocumentRoot "<%= base %>/repo/www"
    ErrorLog logs/repo_error_log
    CustomLog logs/repo_access_log combined
    AddType text/plain .ks
    AddHandler server-parsed .ks .html

    Action markdown /bin/markdown.cgi
    AddHandler markdown .md

</VirtualHost>

# vim: sts=4 sw=4 ts=8:
